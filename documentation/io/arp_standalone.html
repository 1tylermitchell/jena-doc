<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

  <link href="/jena-doc/css/jena.css" rel="stylesheet" type="text/css">

  <title>Apache Jena - Using ARP Without Jena</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  <script src="/js/jena-navigation.js" type="text/javascript"></script>
</head>

<body>
  <div id="header">
    <div id="logoblock">
    <img alt="Apache Jena" src="/images/jena-logo/jena-logo-small.png"/>
    </div>

    <div id="titleblock">
      <h1 class="title">Apache Jena</h1>
      <div id="topmenu" class="tabbar round-10">
        <ul>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/index.html" id="home_menu">Home</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/help_and_support/index.html">Support</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/getting_started/index.html">Getting started</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/tutorials/index.html">Tutorials</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/documentation/index.html">Documentation</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div id="navigation" class="clear">
  <h1 id="quick-links">Quick links</h1>
<ul>
<li><a href="/jena-doc/index.html">Home</a></li>
<li><a href="/jena-doc/download/index.html">Downloads</a></li>
<li><a href="/jena-doc/help_and_support/index.html">Help and support</a></li>
<li><a href="/jena-doc/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
<li><a href="/jena-doc/about_jena/roadmap.html">Roadmap</a></li>
<li><a href="/jena-doc/getting_involved/index.html">Getting involved</a></li>
<li><a href="/jena-doc/documentation/">Documentation</a></li>
</ul>
<h1 id="about-jena">About Jena</h1>
<ul>
<li><a href="/jena-doc/index.html">Home</a></li>
<li><a href="/jena-doc/about_jena/about.html">About Jena</a></li>
<li><a href="/jena-doc/about_jena/architecture.html">Architecture</a></li>
<li><a href="/jena-doc/about_jena/roadmap.html">Roadmap</a></li>
<li><a href="/jena-doc/about_jena/team.html">Project team</a></li>
<li><a href="/jena-doc/about_jena/contributions.html">Related projects</a></li>
</ul>
<h1 id="download">Download</h1>
<ul>
<li><a href="/jena-doc/download/index.html">Downloading Jena</a></li>
<li><a href="/jena-doc/download/maven.html">Using Maven</a></li>
<li><a href="/jena-doc/download/osgi.html">Using OSGi</a></li>
</ul>
<h1 id="help-and-support">Help and support</h1>
<ul>
<li><a href="/jena-doc/help_and_support/index.html">Getting help</a></li>
<li><a href="/jena-doc/help_and_support/bugs_and_suggestions.html">Bugs and suggestions</a></li>
</ul>
<h1 id="getting-started">Getting Started</h1>
<ul>
<li><a href="/jena-doc/getting_started/index.html">A first Jena project</a></li>
<li><a href="/jena-doc/getting_started/rdf_api.html">RDF API overview</a></li>
<li><a href="/jena-doc/getting_started/sparql.html">Querying RDF with SPARQL</a></li>
<li><a href="/jena-doc/getting_started/fuseki.html">Serving RDF over HTTP</a></li>
<li><a href="/jena-doc/getting_started/tell_me_how.html">Tell me how to ...</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="/jena-doc/tutorials/index.html">Tutorials index</a></li>
<li><a href="/jena-doc/tutorials/rdf_api.html">RDF tutorial</a></li>
<li><a href="/jena-doc/tutorials/sparql.html">SPARQL queries</a></li>
<li><a href="/jena-doc/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
</ul>
<h1 id="documentation">Documentation</h1>
<ul>
<li><a href="/jena-doc/documentation/index.html">Overview</a></li>
<li><a href="/jena-doc/documentation/javadoc/">Javadoc</a></li>
<li><a href="/jena-doc/documentation/rdf/index.html">RDF</a></li>
<li><a href="/jena-doc/documentation/io/index.html">I/O</a></li>
<li><a href="/jena-doc/documentation/query/index.html">SPARQL (ARQ)</a><ul>
<li><a href="/jena-doc/documentation/query/app_api.html">Application API</a></li>
<li><a href="/jena-doc/documentation/query/cmds.html">Command line utilities</a></li>
</ul>
</li>
<li><a href="/jena-doc/documentation/query/text-query.html">Text Search</a></li>
<li><a href="/jena-doc/documentation/tdb/index.html">TDB</a><ul>
<li><a href="/jena-doc/documentation/tdb/tdb_transactions.html">API for Transactions</a></li>
<li><a href="/jena-doc/documentation/tdb/assembler.html">Dataset Assembler</a></li>
</ul>
</li>
<li><a href="/jena-doc/documentation/serving_data/index.html">Fuseki: Serving Data</a></li>
<li><a href="/jena-doc/documentation/ontology/index.html">Ontology</a></li>
<li><a href="/jena-doc/documentation/inference/index.html">Inference</a></li>
<li><a href="/jena-doc/documentation/assembler/index.html">Assembler</a><ul>
<li><a href="/jena-doc/documentation/assembler/assembler-howto.html">Assembler how-to</a></li>
<li><a href="/jena-doc/documentation/assembler/inside-assemblers.html">Inside assemblers</a></li>
</ul>
</li>
<li><a href="/jena-doc/documentation/sdb/index.html">SDB</a></li>
<li><a href="/jena-doc/documentation/notes/index.html">Notes</a><ul>
<li><a href="/jena-doc/documentation/notes/concurrency-howto.html">Concurrency how-to</a></li>
<li><a href="/jena-doc/documentation/notes/event-handler-howto.html">Event handler how-to</a></li>
<li><a href="/jena-doc/documentation/notes/file-manager.html">File manager how-to</a></li>
<li><a href="/jena-doc/documentation/notes/model-factory.html">Model factory how-to</a></li>
<li><a href="/jena-doc/documentation/notes/rdf-frames.html">RDF frames</a></li>
<li><a href="/jena-doc/documentation/notes/reification.html">Reification how-to</a></li>
<li><a href="/jena-doc/documentation/notes/typed-literals.html">Typed literals how-to</a></li>
<li><a href="/jena-doc/documentation/notes/iri.html">Support for IRI's</a></li>
<li><a href="/jena-doc/documentation/notes/sse.html">SSE</a></li>
</ul>
</li>
<li><a href="/jena-doc/documentation/tools/index.html">Tools</a><ul>
<li><a href="/jena-doc/documentation/tools/schemagen.html">schemagen</a></li>
<li><a href="/jena-doc/documentation/tools/eyeball-getting-started.html">eyeball</a></li>
</ul>
</li>
</ul>
<h1 id="getting-involved">Getting Involved</h1>
<ul>
<li><a href="/jena-doc/getting_involved/index.html">Contributing to Jena</a><ul>
<li><a href="/jena-doc/getting_involved/reviewing_contributions.html">Reviewing Contributions</a></li>
</ul>
</li>
</ul>
<h1 id="asf-links">ASF links</h1>
<ul>
<li><a href="http://www.apache.org">Apache Software Foundation</a></li>
<li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
<li><a href="http://www.apache.org/security/">Security</a></li>
</ul>
  </div>

  <div id="content">
    <h1 class="title">Using ARP Without Jena</h1>
    <p>ARP can be used both as a Jena subsystem, or as a standalone
RDF/XML parser. This document gives a quick guide to using ARP
standalone.</p>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#sample">Sample Code</a></li>
<li><a href="#handlers">ARP Event Handling</a></li>
<li><a href="#config">Configuring ARP</a></li>
<li><a href="#interrupt">Interrupting ARP</a></li>
<li><a href="#sax2rdf">Using Other SAX Sources</a></li>
<li><a href="#memory">Memory usage</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>To load an RDF file:</p>
<ol>
<li>Create an
    <a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARP.html#ARP()">ARP</a> instance.</li>
<li>Set parse options, particularly error detection control, using
    <a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPConfig.html#getOptions()">getOptions</a>
    or
    <a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPConfig.html#setOptionsWith(com.hp.hpl.jena.rdf.arp.ARPOptions)">setOptionsWith</a>.</li>
<li>Set its handlers, by calling the
    <a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPConfig.html#getHandlers()">getHandlers</a>
    or
    <a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPConfig.html#setHandlersWith(com.hp.hpl.jena.rdf.arp.ARPHandlers)">setHandlersWith</a>
    methods, and then.<ul>
<li>Setting the
    <a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPHandlers.html#setStatementHandler(com.hp.hpl.jena.rdf.arp.StatementHandler)">statement handler</a>.</li>
<li>Optionally setting the other handlers.</li>
</ul>
</li>
<li>Call a
    <a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARP.html#load(java.io.InputStream,%20java.lang.String)">load</a>
    method</li>
</ol>
<p>Xerces is used for parsing the XML. The SAXEvents generated by
Xerces are then analysed as RDF by ARP. It is possible to use a
different source of SAX events.</p>
<p>Errors may occur in either the XML or the RDF part.</p>
<h2 id="sample-code">Sample Code</h2>
<div class="codehilite"><pre><span class="nx">ARP</span> <span class="n">arp</span> <span class="o">=</span> <span class="nb">new</span> <span class="nx">ARP</span><span class="p">();</span>

<span class="c1">// initialisation - uses ARPConfig interface only.</span>
<span class="nx">arp.getOptions</span><span class="p">()</span><span class="bp">.</span><span class="nx">setLaxErrorMode</span><span class="p">();</span>

<span class="nx">arp.getHandlers</span><span class="p">()</span><span class="bp">.</span><span class="nx">setErrorHandler</span><span class="p">(</span><span class="nb">new</span> <span class="nx">ErrorHandler</span><span class="p">(){</span>
    <span class="k">public</span> <span class="nf">void</span> <span class="nb">fatalError</span><span class="p">(</span><span class="nx">SAXParseException</span> <span class="nx">e</span><span class="p">){</span>
           <span class="c1">// TODO code</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="nf">void</span> <span class="nb">error</span><span class="p">(</span><span class="nx">SAXParseException</span> <span class="nx">e</span><span class="p">){</span>
            <span class="c1">// TODO code</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="nf">void</span> <span class="nx">warning</span><span class="p">(</span><span class="nx">SAXParseException</span> <span class="nx">e</span><span class="p">){</span>
            <span class="c1">// TODO code</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="nx">arp.getHandlers</span><span class="p">()</span><span class="bp">.</span><span class="nx">setStatementHandler</span><span class="p">(</span><span class="nb">new</span> <span class="nx">StatementHandler</span><span class="p">(){</span>
    <span class="k">public</span> <span class="nf">void</span> <span class="nb">statement</span><span class="p">(</span><span class="nx">AResource</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">AResource</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">ALiteral</span> <span class="nx">l</span><span class="p">){</span>
            <span class="c1">// TODO code</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="nf">void</span> <span class="nb">statement</span><span class="p">(</span><span class="nx">AResource</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">AResource</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">AResource</span> <span class="nx">l</span><span class="p">){</span>
            <span class="c1">// TODO code</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// parsing.</span>

<span class="nx">try</span> <span class="p">{</span>
    <span class="c1">// Loading fixed input ...</span>
    <span class="nx">arp.load</span><span class="p">(</span><span class="nb">new</span> <span class="nx">StringReader</span><span class="p">(</span>
        <span class="s2">&quot;&lt;rdf:RDF  xmlns:rdf=&#39;http://www.w3.org/1999/02/22-rdf-syntax-ns#&#39;&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="o">+</span><span class="s2">&quot;&lt;rdf:Description&gt;&lt;rdf:value rdf:parseType=&#39;Literal&#39;&gt;&quot;</span>
        <span class="o">+</span><span class="s2">&quot;&lt;b&gt;hello&lt;/b&gt;&lt;/rdf:value&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="o">+</span><span class="s2">&quot;&lt;/rdf:Description&gt;&lt;/rdf:RDF&gt;&quot;</span>
    <span class="p">));</span>

<span class="p">}</span>
<span class="nx">catch</span> <span class="p">(</span><span class="nx">IOException</span> <span class="nx">ioe</span><span class="p">){</span>
    <span class="c1">// something unexpected went wrong</span>
<span class="p">}</span>
<span class="nx">catch</span> <span class="p">(</span><span class="nx">SAXParseException</span> <span class="nb">s</span><span class="p">){</span>
    <span class="c1">// This error will have been reported</span>
<span class="p">}</span>
<span class="nx">catch</span> <span class="p">(</span><span class="nx">SAXException</span> <span class="nx">ss</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// This error will not have been reported.</span>
<span class="p">}</span>
</pre></div>


<h2 id="arp-event-handling">ARP Event Handling</h2>
<p>ARP reports events concerning:</p>
<ul>
<li>Triples found in the input.</li>
<li>Errors in the input.</li>
<li>Namespace declarations.</li>
<li>Scope of blank nodes.</li>
</ul>
<p>User code is needed to respond to any of these events of interest.
This is written by implementing any of the relevant interfaces:
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/StatementHandler.html">StatementHandler</a>,
org.xml.sax.ErrorHandler,
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/NamespaceHandler.html">NamespaceHandler</a>,
and
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ExtendedHandler.html">ExtendedHandler</a>.</p>
<p>An individual handler is set by calling the
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPConfig.html#getHandlers()">getHandlers</a>
method on the ARP instance. This returns an encapsulation of all
the handlers being used. A specific handler is set by calling the
appropriate set...Handler method on that object, e.g.
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPHandlers.html#setStatementHandler(com.hp.hpl.jena.rdf.arp.StatementHandler)">setStatementHandler</a>.</p>
<p>All the handlers can be copied from one ARP instance to another by
using the
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPConfig.html#setHandlersWith(com.hp.hpl.jena.rdf.arp.ARPHandlers)">setHandlersWith</a>
method:</p>
<div class="codehilite"><pre> <span class="n">ARP</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">;</span>
 <span class="c1">// initialize from and to</span>
 <span class="c1">// ...</span>

 <span class="n">to</span><span class="p">.</span><span class="n">setHandlersWith</span><span class="p">(</span><span class="n">from</span><span class="p">.</span><span class="n">getHandlers</span><span class="p">());</span>
</pre></div>


<p>The error handler reports both XML and RDF errors, the former
detected by Xerces. See
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPHandlers.html#setErrorHandler(org.xml.sax.ErrorHandler)">ARPHandlers.setErrorHandler</a>
for details of how to distinguish between them.</p>
<h2 id="configuring-arp">Configuring ARP</h2>
<p>ARP can be configured to treat most error conditions as warnings or
to be ignored, and to treat some non-error conditions as warnings
or errors.</p>
<p>In addition, the behaviour in response to input that does not have
an <code>&lt;rdf:RDF&gt;</code> root element is configurable: either to treat the
whole file as RDF anyway, or to scan the file looking for embedded
<code>&lt;rdf:RDF&gt;</code> elements.</p>
<p>As with the handlers, there is an options object that encapsulates
these settings. It can be accessed using
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPConfig.html#getOptions()"><code>getOptions</code></a>,
and then individual settings can be made using the methods in
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ARPOptions.html"><code>ARPOptions</code></a>.</p>
<p>It is also possible to copy all the option settings from one ARP
instance to another:</p>
<div class="codehilite"><pre> <span class="n">ARP</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">;</span>
 <span class="c1">// initialize from and to ...</span>

 <span class="n">to</span><span class="p">.</span><span class="n">setOptionsWith</span><span class="p">(</span><span class="n">from</span><span class="p">.</span><span class="n">getOptions</span><span class="p">());</span>
</pre></div>


<p>The <a href="iohowto.html#arp_properties">I/O how-to</a> gives some more
detail about the options settings, although it assumes the use of
the Jena <code>RDFReader</code> interface.</p>
<h2 id="interrupting-arp">Interrupting ARP</h2>
<p>It is possible to interrupt an ARP thread. See the
<a href="iohowto.html#interrupting_arp">I/O how-to</a> for details.</p>
<h2 id="using-other-sax-sources">Using Other SAX Sources</h2>
<p>It is possible to use ARP with other SAX input sources, e.g. from a
non-Xerces parser, or from an in-memory XML source, such as a DOM
tree.</p>
<p>Instead of an ARP instance, you create an instance of
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/SAX2RDF.html">SAX2RDF</a> using
the <a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/SAX2RDF.html#newInstance(java.lang.String)">newInstance</a>
method. This can be configured just like an ARP instance, following
the initialization section of the <a href="#sample">sample code</a>.</p>
<p>This is used like a SAX2Model instance as
<a href="sax.html">described elsewhere</a>.</p>
<h2 id="memory-usage">Memory usage</h2>
<p>For very large files, ARP does not use any additional memory except
when either the
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/ExtendedHandler.html#discardNodesWithNodeID()">ExtendedHandler.discardNodesWithNodeID</a>
returns false or when the
<a href="/jena-doc/documentation/javadoc/jena/com/hp/hpl/jena/rdf/arp/AResource.html#setUserData(java.lang.Object)">AResource.setUserData</a>
method has been used. In these cases ARP needs to remember the
<code>rdf:nodeID</code> usage through the file life time.</p>
  </div>

  <div id="footer">
    <div class="copyright">
      <p>
        Copyright &copy; 2011&ndash;2013 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        <br />
        Apache Jena, Jena, the Apache Jena project logo,
        Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
      </p>
    </div>
  </div>

</body>
</html>
