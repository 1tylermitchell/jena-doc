<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

  <link href="/css/jena.css" rel="stylesheet" type="text/css">

  <title>Apache Jena - SPARQL Tutorial - Datasets</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  <script src="/js/jena-navigation.js" type="text/javascript"></script>
</head>

<body>
  <div id="header">
    <div id="logoblock">
    <img alt="Apache Jena" src="/images/jena-logo/jena-logo-small.png"/>
    </div>

    <div id="titleblock">
      <h1 class="title">Apache Jena</h1>
      <div id="topmenu" class="tabbar round-10">
        <ul>
        <li class="round-top-8"><a class="round-top-8" href="/index.html" id="home_menu">Home</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/help_and_support/index.html">Support</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/getting_started/index.html">Getting started</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/tutorials/index.html">Tutorials</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/documentation/index.html">Documentation</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div id="navigation" class="clear">
  <h1 id="quick-links">Quick links</h1>
<ul>
<li><a href="/index.html">Home</a></li>
<li><a href="/download/index.html">Downloads</a></li>
<li><a href="/help_and_support/index.html">Help and support</a></li>
<li><a href="/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
<li><a href="/about_jena/roadmap.html">Roadmap</a></li>
<li><a href="/getting_involved/index.html">Getting involved</a></li>
<li><a href="/documentation/">Documentation</a></li>
</ul>
<h1 id="about-jena">About Jena</h1>
<ul>
<li><a href="/index.html">Home</a></li>
<li><a href="/about_jena/about.html">About Jena</a></li>
<li><a href="/about_jena/architecture.html">Architecture</a></li>
<li><a href="/about_jena/roadmap.html">Roadmap</a></li>
<li><a href="/about_jena/team.html">Project team</a></li>
<li><a href="/about_jena/contributions.html">Related projects</a></li>
</ul>
<h1 id="download">Download</h1>
<ul>
<li><a href="/download/index.html">Downloading Jena</a></li>
<li><a href="/download/maven.html">Using Maven</a></li>
<li><a href="/download/osgi.html">Using OSGi</a></li>
</ul>
<h1 id="help-and-support">Help and support</h1>
<ul>
<li><a href="/help_and_support/index.html">Getting help</a></li>
<li><a href="/help_and_support/bugs_and_suggestions.html">Bugs and suggestions</a></li>
</ul>
<h1 id="getting-started">Getting Started</h1>
<ul>
<li><a href="/getting_started/index.html">A first Jena project</a></li>
<li><a href="/getting_started/rdf_api.html">RDF API overview</a></li>
<li><a href="/getting_started/sparql.html">Querying RDF with SPARQL</a></li>
<li><a href="/getting_started/fuseki.html">Serving RDF over HTTP</a></li>
<li><a href="/getting_started/tell_me_how.html">Tell me how to ...</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="/tutorials/index.html">Tutorials index</a></li>
<li><a href="/tutorials/rdf_api.html">RDF tutorial</a></li>
<li><a href="/tutorials/sparql.html">SPARQL queries</a></li>
<li><a href="/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
</ul>
<h1 id="documentation">Documentation</h1>
<ul>
<li><a href="/documentation/index.html">Overview</a></li>
<li><a href="/documentation/javadoc/">Javadoc</a></li>
<li><a href="/documentation/rdf/index.html">RDF</a></li>
<li><a href="/documentation/io/index.html">I/O</a></li>
<li><a href="/documentation/query/index.html">SPARQL (ARQ)</a><ul>
<li><a href="/documentation/query/app_api.html">Application API</a></li>
<li><a href="/documentation/query/cmds.html">Command line utilities</a></li>
</ul>
</li>
<li><a href="/documentation/query/text-query.html">Text Search</a></li>
<li><a href="/documentation/tdb/index.html">TDB</a><ul>
<li><a href="/documentation/tdb/tdb_transactions.html">API for Transactions</a></li>
<li><a href="/documentation/tdb/assembler.html">Dataset Assembler</a></li>
</ul>
</li>
<li><a href="/documentation/serving_data/index.html">Fuseki: Serving Data</a></li>
<li><a href="/documentation/ontology/index.html">Ontology</a></li>
<li><a href="/documentation/inference/index.html">Inference</a></li>
<li><a href="/documentation/assembler/index.html">Assembler</a><ul>
<li><a href="/documentation/assembler/assembler-howto.html">Assembler how-to</a></li>
<li><a href="/documentation/assembler/inside-assemblers.html">Inside assemblers</a></li>
</ul>
</li>
<li><a href="/documentation/sdb/index.html">SDB</a></li>
<li><a href="/documentation/notes/index.html">Notes</a><ul>
<li><a href="/documentation/notes/concurrency-howto.html">Concurrency how-to</a></li>
<li><a href="/documentation/notes/event-handler-howto.html">Event handler how-to</a></li>
<li><a href="/documentation/notes/file-manager.html">File manager how-to</a></li>
<li><a href="/documentation/notes/model-factory.html">Model factory how-to</a></li>
<li><a href="/documentation/notes/rdf-frames.html">RDF frames</a></li>
<li><a href="/documentation/notes/reification.html">Reification how-to</a></li>
<li><a href="/documentation/notes/typed-literals.html">Typed literals how-to</a></li>
<li><a href="/documentation/notes/iri.html">Support for IRI's</a></li>
<li><a href="/documentation/notes/sse.html">SSE</a></li>
</ul>
</li>
<li><a href="/documentation/tools/index.html">Tools</a><ul>
<li><a href="/documentation/tools/schemagen.html">schemagen</a></li>
<li><a href="/documentation/tools/eyeball-getting-started.html">eyeball</a></li>
</ul>
</li>
</ul>
<h1 id="getting-involved">Getting Involved</h1>
<ul>
<li><a href="/getting_involved/index.html">Contributing to Jena</a><ul>
<li><a href="/getting_involved/reviewing_contributions.html">Reviewing Contributions</a></li>
</ul>
</li>
</ul>
<h1 id="asf-links">ASF links</h1>
<ul>
<li><a href="http://www.apache.org">Apache Software Foundation</a></li>
<li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
<li><a href="http://www.apache.org/security/">Security</a></li>
</ul>
  </div>

  <div id="content">
    <h1 class="title">SPARQL Tutorial - Datasets</h1>
    <p>Essa sessão cobre datasets RDF – um dataset RDF é a unidade consultada por um consulta SPARQL. 
Ele consiste de um grafo padrão, e certo número de grafos nomeados.</p>
<h2 id="consultando-datasets">Consultando datasets</h2>
<p>As operações de casamento de grafos 
(<a href="sparql_basic_patterns_pt.html">padrões básicos</a>,
<a href="sparql_optionals_pt.html"><code>OPTIONAL</code>s</a>, e <a href="sparql_union_pt.html"><code>UNION</code>s</a>) funcionam em um grafo RDF.  Isso começa por ser o grafo padrão do conjunto de dados, 
mas pode ser alterado pela palavra-chave <code>GRAPH</code>.
    GRAPH uri { ... padrão ... }</p>
<div class="codehilite"><pre><span class="n">GRAPH</span> <span class="n">var</span> <span class="p">{</span> <span class="p">...</span> <span class="n">padr</span><span class="err">ã</span><span class="n">o</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>


<p>Se um URI é fornecido, o padrão vai ser casado contra o grafo no dataset com esse nome – se não houver um, 
então clausula <code>GRAPH</code> falhará ao tentar casar.  </p>
<p>Se uma variável é dada, todos os grafos nomeados (não o grafo padrão) 
são testados. A variavel pode ser usada em outro lugar, então, durante a execução, esse valor 
já é conhecido para a solução, somente o grafo nomeado é testado.</p>
<h3 id="dados-de-exemplo">Dados de exemplo</h3>
<p>Um dataset RDF pode ter várias formas.
A instalação comum é ter o grafo padrão sendo a união (o merge RDF)
de todos os grafos nomeados e ter o grafo padrão como um inventário de
grafos nomeados (de onde eles vieram, quando eles foram lidos, etc.). Não há limitações – um grafo pode ser incluído duas vezes sob diferentes nomes, 
ou alguns grafos podem compartilhar triplas com outros.</p>
<p>Nos exemplos abaixo, vamos usar o seguinte dataset que pode ocorrer para um 
RDF agregador de um livro de detalhes:</p>
<p>Grafo padrão (<a href="sparql_data/ds-dft.ttl">ds-dft.ttl</a>):</p>
<div class="codehilite"><pre><span class="err">@</span><span class="n">prefix</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt; .</span>
<span class="err">@</span><span class="n">prefix</span> <span class="n">xsd</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt; .</span>

<span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span><span class="o">&gt;</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="s">&quot;2005-07-14T03:18:56+0100&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="p">.</span>
<span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span><span class="o">&gt;</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="s">&quot;2005-09-22T05:53:05+0100&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="p">.</span>
</pre></div>


<p>Grafo nomeado (<a href="sparql_data/ds-ng-1.ttl">ds-ng-1.ttl</a>):</p>
<div class="codehilite"><pre><span class="err">@</span><span class="n">prefix</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt; .</span>

<span class="p">[]</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="s">&quot;Harry Potter and the Philospher&#39;s Stone&quot;</span> <span class="p">.</span>
<span class="p">[]</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span> <span class="p">.</span>
</pre></div>


<p>Grafo nomeado (<a href="sparql_data/ds-ng-2.ttl">ds-ng-2.ttl</a>):</p>
<div class="codehilite"><pre><span class="err">@</span><span class="n">prefix</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt; .</span>

<span class="p">[]</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="s">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span> <span class="p">.</span>
<span class="p">[]</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span> <span class="p">.</span>
</pre></div>


<p>Isto é, nós temos dois pequenos grafos descrevendo alguns livros, 
e nós temos um grafo padrão que armazena quando esses grafos foram lidos pela última vez. </p>
<p>As consultas podem ser executadas via linha de comando (tudo numa linha):</p>
<div class="codehilite"><pre><span class="n">java</span> <span class="o">-</span><span class="n">cp</span> <span class="p">...</span> <span class="n">arq</span><span class="p">.</span><span class="n">sparql</span>
    <span class="o">--</span><span class="n">graph</span> <span class="n">ds</span><span class="o">-</span><span class="n">dft</span><span class="p">.</span><span class="n">ttl</span> <span class="o">--</span><span class="n">namedgraph</span> <span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">--</span><span class="n">namedgraph</span> <span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span>
    <span class="o">--</span><span class="n">query</span> <span class="n">query</span> <span class="n">file</span>
</pre></div>


<p>Datasets não têm que ser criados só para o tempo de vida da consulta. 
Eles podem ser criados e armazenados num banco de dados, o que seria mais usual para uma aplicação agregadora.</p>
<h3 id="acessando-o-dataset">Acessando o Dataset</h3>
<p>O primeiro exemplo apenas acessa o grafo padrão:
(<a href="sparql_data/q-ds-1.rq">q-ds-1.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">xsd</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt;</span>
<span class="n">PREFIX</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span> <span class="o">:</span> <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">*</span>
<span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span>
</pre></div>


<p>(O "<code>PREFIX : &lt;.&gt;</code>"  apenas ajuda a formatar a saída)</p>
<div class="codehilite"><pre><span class="o">----------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">s</span>            <span class="o">|</span> <span class="n">p</span>       <span class="o">|</span> <span class="n">o</span>                                         <span class="o">|</span>
<span class="o">======================================================================</span>
<span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span> <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="o">|</span> <span class="s">&quot;2005-09-22T05:53:05+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="o">|</span> <span class="s">&quot;2005-07-14T03:18:56+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="o">|</span>
<span class="o">----------------------------------------------------------------------</span>
</pre></div>


<p>Este é somente o grafo padrão – nada dos grafos nomeados porque eles não são consultados a menos que
seja informado explicitamente via <code>GRAPH</code>.</p>
<p>Nós podemos consultar todas as triplas ao consultar o grafo padrão e os grafos nomeados:
(<a href="sparql_data/q-ds-2.rq">q-ds-2.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span>  <span class="n">xsd</span><span class="o">:</span>    <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt;</span>
<span class="n">PREFIX</span>  <span class="n">dc</span><span class="o">:</span>     <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span>  <span class="o">:</span>       <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">*</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span> <span class="n">UNION</span> <span class="p">{</span> <span class="n">GRAPH</span> <span class="o">?</span><span class="n">g</span> <span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>resultando em:</p>
<div class="codehilite"><pre><span class="o">---------------------------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">s</span>            <span class="o">|</span> <span class="n">p</span>        <span class="o">|</span> <span class="n">o</span>                                          <span class="o">|</span> <span class="n">g</span>            <span class="o">|</span>
<span class="o">=======================================================================================</span>
<span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span> <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span>  <span class="o">|</span> <span class="s">&quot;2005-09-22T05:53:05+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span>  <span class="o">|</span>              <span class="o">|</span>
<span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span>  <span class="o">|</span> <span class="s">&quot;2005-07-14T03:18:56+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span>  <span class="o">|</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b0</span>         <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span>    <span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b1</span>         <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span>  <span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b2</span>         <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span>  <span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b3</span>         <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Philospher&#39;s Stone&quot;</span>  <span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">|</span>
<span class="o">---------------------------------------------------------------------------------------</span>
</pre></div>


<h3 id="consultando-um-grafo-especifico">Consultando um grafo especifico</h3>
<p>Se a aplicação souber o nome do grafo, ele pode consultar diretamente títulos num grafo dado:
(<a href="sparql_data/q-ds-3.rq">q-ds-3.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span> <span class="o">:</span> <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">?</span><span class="n">title</span>
<span class="p">{</span>
  <span class="n">GRAPH</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span>
    <span class="p">{</span> <span class="o">?</span><span class="n">b</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">?</span><span class="n">title</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Resultados:</p>
<div class="codehilite"><pre><span class="o">---------------------------------------------</span>
<span class="o">|</span> <span class="n">title</span>                                     <span class="o">|</span>
<span class="o">=============================================</span>
<span class="o">|</span> <span class="s">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span>   <span class="o">|</span>
<span class="o">|</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span> <span class="o">|</span>
<span class="o">---------------------------------------------</span>
</pre></div>


<h3 id="consulta-para-encontrar-dados-de-grafos-que-casam-com-um-padrao">Consulta para encontrar dados de grafos que casam com um padrão</h3>
<p>O nome dos grafos a ser consultados podem ser determinados na consulta.<br />
O mesmo processo se aplica a variáveis se elas são parte de
um padrão de grafo ou na forma  <code>GRAPH</code> form. A consulta abaixo
(<a href="sparql_data/q-ds-4.rq">q-ds-4.rq</a>) seta uma condição nas variáveis 
usadas para selecionar grafos nomeados, baseada na informação do grafo padrão.</p>
<div class="codehilite"><pre><span class="n">PREFIX</span>  <span class="n">xsd</span><span class="o">:</span>    <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt;</span>
<span class="n">PREFIX</span>  <span class="n">dc</span><span class="o">:</span>     <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span>  <span class="o">:</span>       <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">?</span><span class="n">date</span> <span class="o">?</span><span class="n">title</span>
<span class="p">{</span>
  <span class="o">?</span><span class="n">g</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="o">?</span><span class="n">date</span> <span class="p">.</span> <span class="n">FILTER</span> <span class="p">(</span><span class="o">?</span><span class="n">date</span> <span class="o">&gt;</span> <span class="s">&quot;2005-08-01T00:00:00Z&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="p">)</span>
  <span class="n">GRAPH</span> <span class="o">?</span><span class="n">g</span>
      <span class="p">{</span> <span class="o">?</span><span class="n">b</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">?</span><span class="n">title</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>O resultado da consulta no dataset de exemplo são títulos em um dos grafos, o grafo com data anterior a 1 de agosto de 2005.</p>
<div class="codehilite"><pre><span class="o">-----------------------------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">date</span>                                      <span class="o">|</span> <span class="n">title</span>                                     <span class="o">|</span>
<span class="o">=========================================================================================</span>
<span class="o">|</span> <span class="s">&quot;2005-09-22T05:53:05+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span>   <span class="o">|</span>
<span class="o">|</span> <span class="s">&quot;2005-09-22T05:53:05+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span> <span class="o">|</span>
<span class="o">-----------------------------------------------------------------------------------------</span>
</pre></div>


<h2 id="descrevendo-datasets-rdf-from-e-from-named">Descrevendo datasets RDF  - <code>FROM</code> e <code>FROM NAMED</code></h2>
<p>À execução de um consulta pode ser dado o dataset quando o objeto da execução é construído ou ele pode ser 
descrito na própria consulta. Quando os detalhes estão na linha de comando,
um dataset temporário é criado, mas uma aplicação pode criar datasets e então usá-los em várias consultas.</p>
<p>Quando descrito na consulta, <code>FROM &lt;i&gt;url&lt;/i&gt;</code> é usado para identificar o conteúdo a preencher o grafo padrão. 
Pode haver mais de uma clausula <code>FROM</code> e o grafo padrão é resultado da leitura de cada arquivo no grafo padrão. 
Isto é o merge de RDF de grafos individuais.</p>
<p>Não se confunda com o fato de um grafo padrão ser descrito por uma ou mais URL na clausula <code>FROM</code>. 
Esse é o lugar de onde o dado é lito, não o nome do grafo. 
Como muitas clausulas FROM podem ser fornecidas, o dado pode ser lido de vários lugares, 
mas nenhum deles se torna o nome do grafo.</p>
<p><code>FROM NAMED &lt;i&gt;url&lt;/i&gt;</code> é usado para identificar o grafo nomeado. Ao grafo é dado a url e o dado é lido daquela localização.
 Múltiplas clausulas <code>FROM NAMED</code> causam em muitos grafos para serem adicionados ao dataset.</p>
<p>Observe que os grafos são carregados com Jena FileManager que inclui a habilidade de prover localizações alternativas 
para os arquivos. Por exemplo, a consulta pode ter  <code>FROM NAMED &lt;http://example/data&gt;</code>,
e o dado ser lido de <code>file:local.rdf</code>. O nome do grafo vai ser &lt;http://example/data> como na consulta.</p>
<p>Por exemplo, a consulta para buscar todas as triplas em ambos o grafo padrão e os grafos nomeados poderia ser escrita como
(<a href="sparql_data/q-ds-5.rq">q-ds-5.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">xsd</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt;</span>
<span class="n">PREFIX</span> <span class="n">dc</span><span class="o">:</span>  <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span> <span class="o">:</span>    <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span>       <span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">dft</span><span class="p">.</span><span class="n">ttl</span><span class="o">&gt;</span>
<span class="n">FROM</span> <span class="n">NAMED</span> <span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span><span class="o">&gt;</span>
<span class="n">FROM</span> <span class="n">NAMED</span> <span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span><span class="o">&gt;</span>
<span class="p">{</span>
   <span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span> <span class="n">UNION</span> <span class="p">{</span> <span class="n">GRAPH</span> <span class="o">?</span><span class="n">g</span> <span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><a href="sparql_results_pt.html">Next: Resultados</a></p>
  </div>

  <div id="footer">
    <div class="copyright">
      <p>
        Copyright &copy; 2011&ndash;2013 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        <br />
        Apache Jena, Jena, the Apache Jena project logo,
        Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
      </p>
    </div>
  </div>

</body>
</html>
