<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

  <link href="/jena-doc/css/jena.css" rel="stylesheet" type="text/css">

  <title>Apache Jena - SPARQL Tutorial - Datasets</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  <script src="/js/jena-navigation.js" type="text/javascript"></script>
</head>

<body>
  <div id="header">
    <div id="logoblock">
    <img alt="Apache Jena" src="/images/jena-logo/jena-logo-small.png"/>
    </div>

    <div id="titleblock">
      <h1 class="title">Apache Jena</h1>
      <div id="topmenu" class="tabbar round-10">
        <ul>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/index.html" id="home_menu">Home</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/help_and_support/index.html">Support</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/getting_started/index.html">Getting started</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/tutorials/index.html">Tutorials</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/jena-doc/documentation/index.html">Documentation</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div id="navigation" class="clear">
  <h1 id="quick-links">Quick links</h1>
<ul>
<li><a href="/jena-doc/index.html">Home</a></li>
<li><a href="/jena-doc/download/index.html">Downloads</a></li>
<li><a href="/jena-doc/help_and_support/index.html">Help and support</a></li>
<li><a href="/jena-doc/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
<li><a href="/jena-doc/about_jena/roadmap.html">Roadmap</a></li>
<li><a href="/jena-doc/getting_involved/index.html">Getting involved</a></li>
<li><a href="/jena-doc/documentation/">Documentation</a></li>
</ul>
<h1 id="about-jena">About Jena</h1>
<ul>
<li><a href="/jena-doc/index.html">Home</a></li>
<li><a href="/jena-doc/about_jena/about.html">About Jena</a></li>
<li><a href="/jena-doc/about_jena/architecture.html">Architecture</a></li>
<li><a href="/jena-doc/about_jena/roadmap.html">Roadmap</a></li>
<li><a href="/jena-doc/about_jena/team.html">Project team</a></li>
<li><a href="/jena-doc/about_jena/contributions.html">Related projects</a></li>
</ul>
<h1 id="download">Download</h1>
<ul>
<li><a href="/jena-doc/download/index.html">Downloading Jena</a></li>
<li><a href="/jena-doc/download/maven.html">Using Maven</a></li>
<li><a href="/jena-doc/download/osgi.html">Using OSGi</a></li>
</ul>
<h1 id="help-and-support">Help and support</h1>
<ul>
<li><a href="/jena-doc/help_and_support/index.html">Getting help</a></li>
<li><a href="/jena-doc/help_and_support/bugs_and_suggestions.html">Bugs and suggestions</a></li>
</ul>
<h1 id="getting-started">Getting Started</h1>
<ul>
<li><a href="/jena-doc/getting_started/index.html">A first Jena project</a></li>
<li><a href="/jena-doc/getting_started/rdf_api.html">RDF API overview</a></li>
<li><a href="/jena-doc/getting_started/sparql.html">Querying RDF with SPARQL</a></li>
<li><a href="/jena-doc/getting_started/fuseki.html">Serving RDF over HTTP</a></li>
<li><a href="/jena-doc/getting_started/tell_me_how.html">Tell me how to ...</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="/jena-doc/tutorials/index.html">Tutorials index</a></li>
<li><a href="/jena-doc/tutorials/rdf_api.html">RDF tutorial</a></li>
<li><a href="/jena-doc/tutorials/sparql.html">SPARQL queries</a></li>
<li><a href="/jena-doc/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
</ul>
<h1 id="documentation">Documentation</h1>
<ul>
<li><a href="/jena-doc/documentation/index.html">Overview</a></li>
<li><a href="/jena-doc/documentation/javadoc/">Javadoc</a></li>
<li><a href="/jena-doc/documentation/rdf/index.html">RDF</a></li>
<li><a href="/jena-doc/documentation/io/index.html">I/O</a></li>
<li><a href="/jena-doc/documentation/query/index.html">SPARQL (ARQ)</a><ul>
<li><a href="/jena-doc/documentation/query/app_api.html">Application API</a></li>
<li><a href="/jena-doc/documentation/query/cmds.html">Command line utilities</a></li>
</ul>
</li>
<li><a href="/jena-doc/documentation/query/text-query.html">Text Search</a></li>
<li><a href="/jena-doc/documentation/tdb/index.html">TDB</a><ul>
<li><a href="/jena-doc/documentation/tdb/tdb_transactions.html">API for Transactions</a></li>
<li><a href="/jena-doc/documentation/tdb/assembler.html">Dataset Assembler</a></li>
</ul>
</li>
<li><a href="/jena-doc/documentation/serving_data/index.html">Fuseki: Serving Data</a></li>
<li><a href="/jena-doc/documentation/ontology/index.html">Ontology</a></li>
<li><a href="/jena-doc/documentation/inference/index.html">Inference</a></li>
<li><a href="/jena-doc/documentation/assembler/index.html">Assembler</a><ul>
<li><a href="/jena-doc/documentation/assembler/assembler-howto.html">Assembler how-to</a></li>
<li><a href="/jena-doc/documentation/assembler/inside-assemblers.html">Inside assemblers</a></li>
</ul>
</li>
<li><a href="/jena-doc/documentation/sdb/index.html">SDB</a></li>
<li><a href="/jena-doc/documentation/notes/index.html">Notes</a><ul>
<li><a href="/jena-doc/documentation/notes/concurrency-howto.html">Concurrency how-to</a></li>
<li><a href="/jena-doc/documentation/notes/event-handler-howto.html">Event handler how-to</a></li>
<li><a href="/jena-doc/documentation/notes/file-manager.html">File manager how-to</a></li>
<li><a href="/jena-doc/documentation/notes/model-factory.html">Model factory how-to</a></li>
<li><a href="/jena-doc/documentation/notes/rdf-frames.html">RDF frames</a></li>
<li><a href="/jena-doc/documentation/notes/reification.html">Reification how-to</a></li>
<li><a href="/jena-doc/documentation/notes/typed-literals.html">Typed literals how-to</a></li>
<li><a href="/jena-doc/documentation/notes/iri.html">Support for IRI's</a></li>
<li><a href="/jena-doc/documentation/notes/sse.html">SSE</a></li>
</ul>
</li>
<li><a href="/jena-doc/documentation/tools/index.html">Tools</a><ul>
<li><a href="/jena-doc/documentation/tools/schemagen.html">schemagen</a></li>
<li><a href="/jena-doc/documentation/tools/eyeball-getting-started.html">eyeball</a></li>
</ul>
</li>
</ul>
<h1 id="getting-involved">Getting Involved</h1>
<ul>
<li><a href="/jena-doc/getting_involved/index.html">Contributing to Jena</a><ul>
<li><a href="/jena-doc/getting_involved/reviewing_contributions.html">Reviewing Contributions</a></li>
</ul>
</li>
</ul>
<h1 id="asf-links">ASF links</h1>
<ul>
<li><a href="http://www.apache.org">Apache Software Foundation</a></li>
<li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
<li><a href="http://www.apache.org/security/">Security</a></li>
</ul>
  </div>

  <div id="content">
    <h1 class="title">SPARQL Tutorial - Datasets</h1>
    <p>This section covers RDF Datasets - an RDF Dataset is the unit that
is queried by a SPARQL query. It consists of a default graph, and a
number of named graphs.</p>
<h2 id="querying-datasets">Querying datasets</h2>
<p class=".. pattern ... ">The graph matching operation
(<a href="sparql_basic_patterns.html">basic patterns</a>,
<a href="sparql_optionals.html"><code>OPTIONAL</code>s</a>, and <a href="sparql_union.html"><code>UNION</code>s</a>) work on
one RDF graph.  This starts out being the default graph of the
dataset but it can be changed by the <code>GRAPH</code> keyword.
    GRAPH uri</p>
<div class="codehilite"><pre><span class="n">GRAPH</span> <span class="n">var</span> <span class="p">{</span> <span class="p">...</span> <span class="n">pattern</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>


<p>If a URI is given, the pattern will be matched against the graph in
the dataset with that name - if there isn't one, the <code>GRAPH</code> clause
fails to match at all.</p>
<p>If a variable is given, all the named graphs (not the default
graph) are tried.  The variable may be used elsewhere so that if,
during execution, it's value is already known for a solution, only
the specific named graph is tried.</p>
<h3 id="example-data">Example Data</h3>
<p>An RDF dataset can take a variety of forms.  Two common setups are
to have the default graph being the union (the RDF merge) of all
the named graphs and to have the default graph be an inventory of
the named graphs (where they came from, when they were read etc). 
There are no limitations - one graph can be included twice under
different names, or some graphs may share triples with others.</p>
<p>In the examples below we will use the following dataset that might
occur for an RDF aggregator of book details:</p>
<p>Default graph (<a href="sparql_data/ds-dft.ttl">ds-dft.ttl</a>):</p>
<div class="codehilite"><pre><span class="err">@</span><span class="n">prefix</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt; .</span>
<span class="err">@</span><span class="n">prefix</span> <span class="n">xsd</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt; .</span>

<span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span><span class="o">&gt;</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="s">&quot;2005-07-14T03:18:56+0100&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="p">.</span>
<span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span><span class="o">&gt;</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="s">&quot;2005-09-22T05:53:05+0100&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="p">.</span>
</pre></div>


<p>Named graph (<a href="sparql_data/ds-ng-1.ttl">ds-ng-1.ttl</a>):</p>
<div class="codehilite"><pre><span class="err">@</span><span class="n">prefix</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt; .</span>

<span class="p">[]</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="s">&quot;Harry Potter and the Philospher&#39;s Stone&quot;</span> <span class="p">.</span>
<span class="p">[]</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span> <span class="p">.</span>
</pre></div>


<p>Named graph (<a href="sparql_data/ds-ng-2.ttl">ds-ng-2.ttl</a>):</p>
<div class="codehilite"><pre><span class="err">@</span><span class="n">prefix</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt; .</span>

<span class="p">[]</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="s">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span> <span class="p">.</span>
<span class="p">[]</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span> <span class="p">.</span>
</pre></div>


<p>That is, we have two small graphs describing some books, and we
have a default graph which records when these graphs were last
read</p>
<p>Queries can be run with the command line application (this would be
all one line):</p>
<div class="codehilite"><pre><span class="n">java</span> <span class="o">-</span><span class="n">cp</span> <span class="p">...</span> <span class="n">arq</span><span class="p">.</span><span class="n">sparql</span>
    <span class="o">--</span><span class="n">graph</span> <span class="n">ds</span><span class="o">-</span><span class="n">dft</span><span class="p">.</span><span class="n">ttl</span> <span class="o">--</span><span class="n">namedgraph</span> <span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">--</span><span class="n">namedgraph</span> <span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span>
    <span class="o">--</span><span class="n">query</span> <span class="n">query</span> <span class="n">file</span>
</pre></div>


<p>Datasets don't have to created just for the lifetime of the query. 
They can be created and stored in a database, as would be more
usual for an aggregator application.</p>
<h3 id="accessing-the-dataset">Accessing the Dataset</h3>
<p>The first example just accesses the default graph
(<a href="sparql_data/q-ds-1.rq">q-ds-1.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">xsd</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt;</span>
<span class="n">PREFIX</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span> <span class="o">:</span> <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">*</span>
<span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span>
</pre></div>


<p>(The "<code>PREFIX : &lt;.&gt;</code>"  just helps format the output)</p>
<div class="codehilite"><pre><span class="o">----------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">s</span>            <span class="o">|</span> <span class="n">p</span>       <span class="o">|</span> <span class="n">o</span>                                         <span class="o">|</span>
<span class="o">======================================================================</span>
<span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span> <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="o">|</span> <span class="s">&quot;2005-09-22T05:53:05+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="o">|</span> <span class="s">&quot;2005-07-14T03:18:56+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="o">|</span>
<span class="o">----------------------------------------------------------------------</span>
</pre></div>


<p>This is the default graph only - nothing from the named graphs
because they aren't queried unless explicitly indicated via
<code>GRAPH</code>.</p>
<p>We can query for all triples by querying the default graph and the
named graphs (<a href="sparql_data/q-ds-2.rq">q-ds-2.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span>  <span class="n">xsd</span><span class="o">:</span>    <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt;</span>
<span class="n">PREFIX</span>  <span class="n">dc</span><span class="o">:</span>     <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span>  <span class="o">:</span>       <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">*</span>
<span class="p">{</span>
    <span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span> <span class="n">UNION</span> <span class="p">{</span> <span class="n">GRAPH</span> <span class="o">?</span><span class="n">g</span> <span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>giving:</p>
<div class="codehilite"><pre><span class="o">---------------------------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">s</span>            <span class="o">|</span> <span class="n">p</span>        <span class="o">|</span> <span class="n">o</span>                                          <span class="o">|</span> <span class="n">g</span>            <span class="o">|</span>
<span class="o">=======================================================================================</span>
<span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span> <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span>  <span class="o">|</span> <span class="s">&quot;2005-09-22T05:53:05+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span>  <span class="o">|</span>              <span class="o">|</span>
<span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span>  <span class="o">|</span> <span class="s">&quot;2005-07-14T03:18:56+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span>  <span class="o">|</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b0</span>         <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span>    <span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b1</span>         <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span>  <span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b2</span>         <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span>  <span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b3</span>         <span class="o">|</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Philospher&#39;s Stone&quot;</span>  <span class="o">|</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span> <span class="o">|</span>
<span class="o">---------------------------------------------------------------------------------------</span>
</pre></div>


<h3 id="querying-a-specific-graph">Querying a specific graph</h3>
<p>If the application knows the name graph, it can directly ask a
query such as finding all the titles in a given graph
(<a href="sparql_data/q-ds-3.rq">q-ds-3.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">dc</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span> <span class="o">:</span> <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">?</span><span class="n">title</span>
<span class="p">{</span>
  <span class="n">GRAPH</span> <span class="o">:</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span>
    <span class="p">{</span> <span class="o">?</span><span class="n">b</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">?</span><span class="n">title</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Results:</p>
<div class="codehilite"><pre><span class="o">---------------------------------------------</span>
<span class="o">|</span> <span class="n">title</span>                                     <span class="o">|</span>
<span class="o">=============================================</span>
<span class="o">|</span> <span class="s">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span>   <span class="o">|</span>
<span class="o">|</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span> <span class="o">|</span>
<span class="o">---------------------------------------------</span>
</pre></div>


<h3 id="querying-to-find-data-from-graphs-that-match-a-pattern">Querying to find data from graphs that match a pattern</h3>
<p>The name of the graphs to be queried can be determined with the
query itself. The same process for variables applies whether they
are part of a graph pattern or the <code>GRAPH</code> form. The query below
(<a href="sparql_data/q-ds-4.rq">q-ds-4.rq</a>) sets a condition on the variable used to
select named graphs, based on information in the default graph.</p>
<div class="codehilite"><pre><span class="n">PREFIX</span>  <span class="n">xsd</span><span class="o">:</span>    <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt;</span>
<span class="n">PREFIX</span>  <span class="n">dc</span><span class="o">:</span>     <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span>  <span class="o">:</span>       <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">?</span><span class="n">date</span> <span class="o">?</span><span class="n">title</span>
<span class="p">{</span>
  <span class="o">?</span><span class="n">g</span> <span class="n">dc</span><span class="o">:</span><span class="n">date</span> <span class="o">?</span><span class="n">date</span> <span class="p">.</span> <span class="n">FILTER</span> <span class="p">(</span><span class="o">?</span><span class="n">date</span> <span class="o">&gt;</span> <span class="s">&quot;2005-08-01T00:00:00Z&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="p">)</span>
  <span class="n">GRAPH</span> <span class="o">?</span><span class="n">g</span>
      <span class="p">{</span> <span class="o">?</span><span class="n">b</span> <span class="n">dc</span><span class="o">:</span><span class="n">title</span> <span class="o">?</span><span class="n">title</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>The results of executing this query on the example dataset are the
titles in one of the graphs, the one with the date later than 1
August 2005.</p>
<div class="codehilite"><pre><span class="o">-----------------------------------------------------------------------------------------</span>
<span class="o">|</span> <span class="n">date</span>                                      <span class="o">|</span> <span class="n">title</span>                                     <span class="o">|</span>
<span class="o">=========================================================================================</span>
<span class="o">|</span> <span class="s">&quot;2005-09-22T05:53:05+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Sorcerer&#39;s Stone&quot;</span>   <span class="o">|</span>
<span class="o">|</span> <span class="s">&quot;2005-09-22T05:53:05+01:00&quot;</span><span class="o">^^</span><span class="n">xsd</span><span class="o">:</span><span class="n">dateTime</span> <span class="o">|</span> <span class="s">&quot;Harry Potter and the Chamber of Secrets&quot;</span> <span class="o">|</span>
<span class="o">-----------------------------------------------------------------------------------------</span>
</pre></div>


<h2 id="describing-rdf-datasets-from-and-from-named">Describing RDF Datasets - <code>FROM</code> and <code>FROM NAMED</code></h2>
<p>A query execution can be given the dataset when the execution
object is built or it can be described in the query itself. When
the details are on the command line, a temporary dataset is created
but an application can create datasets and then use them in many
queries.</p>
<p>When described in the query, <code>FROM &lt;i&gt;url&lt;/i&gt;</code> is used to identify
the contents to be in the default graph. There can be more than one
<code>FROM</code> clause and the default graph is result of reading each file
into the default graph. It is the RDF merge of the individual
graphs.</p>
<p>Don't be confused by the fact the default graph is described by one
or more URLs in <code>FROM</code> clauses. This is where the data is read
from, not the name of the graph. As several FROM clauses can be
given, the data can be read in from several places but none of them
become the graph name.</p>
<p><code>FROM NAMED &lt;i&gt;url&lt;/i&gt;</code> is used to identify a named graph. The
graph is given the name <em>url</em> and the data is read from that
location. Multiple <code>FROM NAMED</code> clauses cause multiple graphs to be
added to the dataset.</p>
<p>Note that graphs are loaded with the Jena FileManager which
includes the ability to provide alternative locations for files.
For example, the query may have <code>FROM NAMED &lt;http://example/data&gt;</code>,
and the data actually be read from <code>file:local.rdf</code>. The name of
the graph will be &lt;http://example/data> as in the query.</p>
<p>For example, the query to find all the triples in both default
graph and named graphs could be written as
(<a href="sparql_data/q-ds-5.rq">q-ds-5.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">xsd</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#&gt;</span>
<span class="n">PREFIX</span> <span class="n">dc</span><span class="o">:</span>  <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//purl.org/dc/elements/1.1/&gt;</span>
<span class="n">PREFIX</span> <span class="o">:</span>    <span class="o">&lt;</span><span class="p">.</span><span class="o">&gt;</span>

<span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span>       <span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">dft</span><span class="p">.</span><span class="n">ttl</span><span class="o">&gt;</span>
<span class="n">FROM</span> <span class="n">NAMED</span> <span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">1.</span><span class="n">ttl</span><span class="o">&gt;</span>
<span class="n">FROM</span> <span class="n">NAMED</span> <span class="o">&lt;</span><span class="n">ds</span><span class="o">-</span><span class="n">ng</span><span class="o">-</span><span class="mf">2.</span><span class="n">ttl</span><span class="o">&gt;</span>
<span class="p">{</span>
   <span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span> <span class="n">UNION</span> <span class="p">{</span> <span class="n">GRAPH</span> <span class="o">?</span><span class="n">g</span> <span class="p">{</span> <span class="o">?</span><span class="n">s</span> <span class="o">?</span><span class="n">p</span> <span class="o">?</span><span class="n">o</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><a href="sparql_results.html">Next: results</a></p>
  </div>

  <div id="footer">
    <div class="copyright">
      <p>
        Copyright &copy; 2011&ndash;2013 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        <br />
        Apache Jena, Jena, the Apache Jena project logo,
        Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
      </p>
    </div>
  </div>

</body>
</html>
