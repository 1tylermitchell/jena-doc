<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

  <link href="/css/jena.css" rel="stylesheet" type="text/css">

  <title>Apache Jena - ARQ - Application API</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  <script src="/js/jena-navigation.js" type="text/javascript"></script>
</head>

<body>
  <div id="header">
    <div id="logoblock">
    <img alt="Apache Jena" src="/images/jena-logo/jena-logo-small.png"/>
    </div>

    <div id="titleblock">
      <h1 class="title">Apache Jena</h1>
      <div id="topmenu" class="tabbar round-10">
        <ul>
        <li class="round-top-8"><a class="round-top-8" href="/index.html" id="home_menu">Home</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/help_and_support/index.html">Support</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/getting_started/index.html">Getting started</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/tutorials/index.html">Tutorials</a></li>
        <li class="round-top-8"><a class="round-top-8" href="/documentation/index.html">Documentation</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div id="navigation" class="clear">
  <h1 id="quick-links">Quick links</h1>
<ul>
<li><a href="/index.html">Home</a></li>
<li><a href="/download/index.html">Downloads</a></li>
<li><a href="/help_and_support/index.html">Help and support</a></li>
<li><a href="/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
<li><a href="/about_jena/roadmap.html">Roadmap</a></li>
<li><a href="/getting_involved/index.html">Getting involved</a></li>
<li><a href="/documentation/">Documentation</a></li>
</ul>
<h1 id="about-jena">About Jena</h1>
<ul>
<li><a href="/index.html">Home</a></li>
<li><a href="/about_jena/about.html">About Jena</a></li>
<li><a href="/about_jena/architecture.html">Architecture</a></li>
<li><a href="/about_jena/roadmap.html">Roadmap</a></li>
<li><a href="/about_jena/team.html">Project team</a></li>
<li><a href="/about_jena/contributions.html">Related projects</a></li>
</ul>
<h1 id="download">Download</h1>
<ul>
<li><a href="/download/index.html">Downloading Jena</a></li>
<li><a href="/download/maven.html">Using Maven</a></li>
<li><a href="/download/osgi.html">Using OSGi</a></li>
</ul>
<h1 id="help-and-support">Help and support</h1>
<ul>
<li><a href="/help_and_support/index.html">Getting help</a></li>
<li><a href="/help_and_support/bugs_and_suggestions.html">Bugs and suggestions</a></li>
</ul>
<h1 id="getting-started">Getting Started</h1>
<ul>
<li><a href="/getting_started/index.html">A first Jena project</a></li>
<li><a href="/getting_started/rdf_api.html">RDF API overview</a></li>
<li><a href="/getting_started/sparql.html">Querying RDF with SPARQL</a></li>
<li><a href="/getting_started/fuseki.html">Serving RDF over HTTP</a></li>
<li><a href="/getting_started/tell_me_how.html">Tell me how to ...</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="/tutorials/index.html">Tutorials index</a></li>
<li><a href="/tutorials/rdf_api.html">RDF tutorial</a></li>
<li><a href="/tutorials/sparql.html">SPARQL queries</a></li>
<li><a href="/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
</ul>
<h1 id="documentation">Documentation</h1>
<ul>
<li><a href="/documentation/index.html">Overview</a></li>
<li><a href="/documentation/javadoc/">Javadoc</a></li>
<li><a href="/documentation/rdf/index.html">RDF</a></li>
<li><a href="/documentation/io/index.html">I/O</a></li>
<li><a href="/documentation/query/index.html">SPARQL (ARQ)</a><ul>
<li><a href="/documentation/query/app_api.html">Application API</a></li>
<li><a href="/documentation/query/cmds.html">Command line utilities</a></li>
</ul>
</li>
<li><a href="/documentation/query/text-query.html">Text Search</a></li>
<li><a href="/documentation/tdb/index.html">TDB</a><ul>
<li><a href="/documentation/tdb/tdb_transactions.html">API for Transactions</a></li>
<li><a href="/documentation/tdb/assembler.html">Dataset Assembler</a></li>
</ul>
</li>
<li><a href="/documentation/serving_data/index.html">Fuseki: Serving Data</a></li>
<li><a href="/documentation/ontology/index.html">Ontology</a></li>
<li><a href="/documentation/inference/index.html">Inference</a></li>
<li><a href="/documentation/assembler/index.html">Assembler</a><ul>
<li><a href="/documentation/assembler/assembler-howto.html">Assembler how-to</a></li>
<li><a href="/documentation/assembler/inside-assemblers.html">Inside assemblers</a></li>
</ul>
</li>
<li><a href="/documentation/sdb/index.html">SDB</a></li>
<li><a href="/documentation/notes/index.html">Notes</a><ul>
<li><a href="/documentation/notes/concurrency-howto.html">Concurrency how-to</a></li>
<li><a href="/documentation/notes/event-handler-howto.html">Event handler how-to</a></li>
<li><a href="/documentation/notes/file-manager.html">File manager how-to</a></li>
<li><a href="/documentation/notes/model-factory.html">Model factory how-to</a></li>
<li><a href="/documentation/notes/rdf-frames.html">RDF frames</a></li>
<li><a href="/documentation/notes/reification.html">Reification how-to</a></li>
<li><a href="/documentation/notes/typed-literals.html">Typed literals how-to</a></li>
<li><a href="/documentation/notes/iri.html">Support for IRI's</a></li>
<li><a href="/documentation/notes/sse.html">SSE</a></li>
</ul>
</li>
<li><a href="/documentation/tools/index.html">Tools</a><ul>
<li><a href="/documentation/tools/schemagen.html">schemagen</a></li>
<li><a href="/documentation/tools/eyeball-getting-started.html">eyeball</a></li>
</ul>
</li>
</ul>
<h1 id="getting-involved">Getting Involved</h1>
<ul>
<li><a href="/getting_involved/index.html">Contributing to Jena</a><ul>
<li><a href="/getting_involved/reviewing_contributions.html">Reviewing Contributions</a></li>
</ul>
</li>
</ul>
<h1 id="asf-links">ASF links</h1>
<ul>
<li><a href="http://www.apache.org">Apache Software Foundation</a></li>
<li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
<li><a href="http://www.apache.org/security/">Security</a></li>
</ul>
  </div>

  <div id="content">
    <h1 class="title">ARQ - Application API</h1>
    <p>The application API is in the package <code>com.hp.hpl.jena.query</code>.</p>
<p>Other packages contain various parts of the system (execution
engine, parsers, testing etc). Most applications will only need to
use the main package. Only applications wishing to programmatically
build queries or modify the behaviour of the query engine need to
use the others packages directly.</p>
<h2 id="key-classes">Key Classes</h2>
<p>The package <code>com.hp.hpl.jena.query</code> is the main application
package.</p>
<ul>
<li><code>Query</code> - a class that represents the application query. It is
    a container for all the details of the query. Objects of class
    Query are normally created by calling one of the methods of
    <code>QueryFactory</code> methods which provide access to the various parsers.</li>
<li><code>QueryExecution</code> - represents one execution of a query.</li>
<li><code>QueryExecutionFactory</code> - a place to get <code>QueryExecution</code>
    instances</li>
<li><code>DatasetFactory</code> - a place to make datasets, including making a
    <code>DataSource</code> (an updatable <code>Dataset</code>)</li>
<li>For SELECT queries:<ul>
<li><code>QuerySolution</code> - A single solution to the query</li>
<li><code>ResultSet</code> - All the QuerySolutions. An iterator.</li>
<li><code>ResultSetFormatter</code> - turn a ResultSet into various forms;
    into text, into an RDF graph (Model, in Jena terminology) or as
    plain XML</li>
</ul>
</li>
</ul>
<h2 id="select-queries">SELECT queries</h2>
<p>The basic steps in making a SELECT query are outlined in the
example below. A query is created from a string using the
<code>QueryFactory</code>. The query and model or RDF dataset to be queried
are then passed to <code>QueryExecutionFactory</code> to produce an instance
of a query execution. Result are handled in a loop and finally the
query execution is closed.</p>
<div class="codehilite"><pre>  <span class="n">import</span> <span class="n">com</span><span class="p">.</span><span class="n">hp</span><span class="p">.</span><span class="n">hpl</span><span class="p">.</span><span class="n">jena</span><span class="p">.</span><span class="n">query</span><span class="p">.</span><span class="o">*</span> <span class="p">;</span>
  <span class="n">Model</span> <span class="n">model</span> <span class="o">=</span> <span class="p">...</span> <span class="p">;</span>
  <span class="n">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">&quot; .... &quot;</span> <span class="p">;</span>
  <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span> <span class="p">;</span>
  <span class="n">QueryExecution</span> <span class="n">qexec</span> <span class="o">=</span> <span class="n">QueryExecutionFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span> <span class="p">;</span>
  <span class="n">try</span> <span class="p">{</span>
    <span class="n">ResultSet</span> <span class="n">results</span> <span class="o">=</span> <span class="n">qexec</span><span class="p">.</span><span class="n">execSelect</span><span class="p">()</span> <span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="n">results</span><span class="p">.</span><span class="n">hasNext</span><span class="p">()</span> <span class="p">;</span> <span class="p">)</span>
    <span class="p">{</span>
      <span class="n">QuerySolution</span> <span class="n">soln</span> <span class="o">=</span> <span class="n">results</span><span class="p">.</span><span class="n">nextSolution</span><span class="p">()</span> <span class="p">;</span>
      <span class="n">RDFNode</span> <span class="n">x</span> <span class="o">=</span> <span class="n">soln</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;varName&quot;</span><span class="p">)</span> <span class="p">;</span>       <span class="c1">// Get a result variable by name.</span>
      <span class="n">Resource</span> <span class="n">r</span> <span class="o">=</span> <span class="n">soln</span><span class="p">.</span><span class="n">getResource</span><span class="p">(</span><span class="s">&quot;VarR&quot;</span><span class="p">)</span> <span class="p">;</span> <span class="c1">// Get a result variable - must be a resource</span>
      <span class="n">Literal</span> <span class="n">l</span> <span class="o">=</span> <span class="n">soln</span><span class="p">.</span><span class="n">getLiteral</span><span class="p">(</span><span class="s">&quot;VarL&quot;</span><span class="p">)</span> <span class="p">;</span>   <span class="c1">// Get a result variable - must be a literal</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="n">finally</span> <span class="p">{</span> <span class="n">qexec</span><span class="p">.</span><span class="n">close</span><span class="p">()</span> <span class="p">;</span> <span class="p">}</span>
</pre></div>


<p>It is important to cleanly close the query execution when finished.
System resources connected to persistent storage may need to be
released.</p>
<p>A ResultSetARQ supports the Java iterator interface so the
following is also a way to process the results if preferred:</p>
<div class="codehilite"><pre>    <span class="nb">Iterator</span><span class="o">&lt;</span><span class="nx">QuerySolution</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="nx">qexec.execSelect</span><span class="p">()</span> <span class="p">;</span>
    <span class="nb">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">results.hasNext</span><span class="p">()</span> <span class="p">;</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">QuerySolution</span> <span class="n">soln</span> <span class="o">=</span> <span class="nx">results.next</span><span class="p">()</span> <span class="p">;</span>
    <span class="nx">.</span> <span class="nx">.</span> <span class="nx">.</span>
    <span class="p">}</span>
</pre></div>


<p>The step of creating a query and then a query execution can be
reduced to one step in some common cases:</p>
<div class="codehilite"><pre>  <span class="n">import</span> <span class="n">com</span><span class="p">.</span><span class="n">hp</span><span class="p">.</span><span class="n">hpl</span><span class="p">.</span><span class="n">jena</span><span class="p">.</span><span class="n">query</span><span class="p">.</span><span class="o">*</span> <span class="p">;</span>
  <span class="n">Model</span> <span class="n">model</span> <span class="o">=</span> <span class="p">...</span> <span class="p">;</span>
  <span class="n">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">&quot; .... &quot;</span> <span class="p">;</span>
  <span class="n">QueryExecution</span> <span class="n">qexec</span> <span class="o">=</span> <span class="n">QueryExecutionFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">queryString</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span> <span class="p">;</span>
  <span class="n">try</span> <span class="p">{</span>
   <span class="n">ResultSet</span> <span class="n">results</span> <span class="o">=</span> <span class="n">qexec</span><span class="p">.</span><span class="n">execSelect</span><span class="p">()</span> <span class="p">;</span>
    <span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
  <span class="p">}</span> <span class="n">finally</span> <span class="p">{</span> <span class="n">qexec</span><span class="p">.</span><span class="n">close</span><span class="p">()</span> <span class="p">;</span> <span class="p">}</span>
</pre></div>


<h3 id="example-formatting-a-result-set">Example: formatting a result set</h3>
<p>Instead of a loop to deal with each row in the result set, the
application can call an operation of the ResultSetFormatter. This
is what the command line applications do.</p>
<p>Example: processing results to produce a simple text presentation:</p>
<div class="codehilite"><pre>    <span class="n">ResultSetFormatter</span> <span class="n">fmt</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ResultSetFormatter</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span> <span class="p">;</span>
    <span class="n">fmt</span><span class="p">.</span><span class="n">printAll</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">)</span> <span class="p">;</span>
</pre></div>


<p>or simply:</p>
<div class="codehilite"><pre> <span class="n">ResultSetFormatter</span><span class="p">.</span><span class="n">out</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span> <span class="p">;</span>
</pre></div>


<h3 id="example-processing-results">Example: Processing results</h3>
<p>The results are objects from the Jena RDF API and API calls, which
do not modify the model, can be mixed with query results
processing:</p>
<div class="codehilite"><pre>  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="n">results</span><span class="p">.</span><span class="n">hasNext</span><span class="p">()</span> <span class="p">;</span> <span class="p">)</span>
  <span class="p">{</span>
      <span class="c1">// Access variables: soln.get(&quot;x&quot;) ;</span>
      <span class="n">RDFNode</span> <span class="n">n</span> <span class="o">=</span> <span class="n">soln</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">)</span> <span class="p">;</span> <span class="c1">// &quot;x&quot; is a variable in the query</span>
      <span class="c1">// If you need to test the thing returned</span>
      <span class="k">if</span> <span class="p">(</span> <span class="n">n</span><span class="p">.</span><span class="n">isLiteral</span><span class="p">()</span> <span class="p">)</span>
          <span class="p">((</span><span class="n">Literal</span><span class="p">)</span><span class="n">n</span><span class="p">).</span><span class="n">getLexicalForm</span><span class="p">()</span> <span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="n">n</span><span class="p">.</span><span class="n">isResource</span><span class="p">()</span> <span class="p">)</span>
      <span class="p">{</span>
         <span class="n">Resource</span> <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">Resource</span><span class="p">)</span><span class="n">n</span> <span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="n">r</span><span class="p">.</span><span class="n">isAnon</span><span class="p">()</span> <span class="p">)</span>
          <span class="p">{</span>
            <span class="p">...</span> <span class="n">r</span><span class="p">.</span><span class="n">getURI</span><span class="p">()</span> <span class="p">...</span>
          <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">}</span>
</pre></div>


<p>Updates to the model must be carried out after the query execution
has finished. Typically, this involves collecting results of
interest in a local datastructure and looping over that structure
after the query execution has finished and been closed.</p>
<h2 id="construct-queries">CONSTRUCT Queries</h2>
<p><code>CONSTRUCT</code> queries return a single RDF graph. As usual, the query
execution should be closed after use.</p>
<div class="codehilite"><pre><span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span> <span class="p">;</span>
<span class="n">QueryExecution</span> <span class="n">qexec</span> <span class="o">=</span> <span class="n">QueryExecutionFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span> <span class="p">;</span>
<span class="n">Model</span> <span class="n">resultModel</span> <span class="o">=</span> <span class="n">qexec</span><span class="p">.</span><span class="n">execConstruct</span><span class="p">()</span> <span class="p">;</span>
<span class="n">qexec</span><span class="p">.</span><span class="n">close</span><span class="p">()</span> <span class="p">;</span>
</pre></div>


<h2 id="describe-queries">DESCRIBE Queries</h2>
<p><code>DESCRIBE</code> queries return a single RDF graph. 
<a href="extension.html#describeHandlers">Different handlers</a> for the
<code>DESCRIBE</code> operation can be loaded by added by the application.</p>
<div class="codehilite"><pre><span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span> <span class="p">;</span>
<span class="n">QueryExecution</span> <span class="n">qexec</span> <span class="o">=</span> <span class="n">QueryExecutionFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span> <span class="p">;</span>
<span class="n">Model</span> <span class="n">resultModel</span> <span class="o">=</span> <span class="n">qexec</span><span class="p">.</span><span class="n">execDescribe</span><span class="p">()</span> <span class="p">;</span>
<span class="n">qexec</span><span class="p">.</span><span class="n">close</span><span class="p">()</span> <span class="p">;</span>
</pre></div>


<h2 id="ask-queries">ASK Queries</h2>
<p>The operation Query.execAsk() returns a boolean value indicating
whether the query pattern matched the graph or dataset or not.</p>
<div class="codehilite"><pre><span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span> <span class="p">;</span>
<span class="n">QueryExecution</span> <span class="n">qexec</span> <span class="o">=</span> <span class="n">QueryExecutionFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span> <span class="p">;</span>
<span class="n">boolean</span> <span class="n">result</span> <span class="o">=</span> <span class="n">qexec</span><span class="p">.</span><span class="n">execAsk</span><span class="p">()</span> <span class="p">;</span>
<span class="n">qexec</span><span class="p">.</span><span class="n">close</span><span class="p">()</span> <span class="p">;</span>
</pre></div>


<h2 id="formatting-xml-results">Formatting XML results</h2>
<p>The <code>ResultSetFormatter</code> class has methods to write out the
<a href="http://www.w3.org/TR/rdf-sparql-XMLres/">SPARQL Query Results XML Format</a>.
See ResultSetFormatter.outputAsXML method.</p>
<h2 id="datasets">Datasets</h2>
<p>The examples above are all queries on a single model.  A SPARQL
query is made on a dataset, which is a default graph and zero or
more named graphs. Datasets can be constructed using the
<code>DatasetFactory</code>:</p>
<div class="codehilite"><pre><span class="n">String</span> <span class="n">dftGraphURI</span> <span class="o">=</span> <span class="s">&quot;file:default-graph.ttl&quot;</span> <span class="p">;</span>
<span class="n">List</span> <span class="n">namedGraphURIs</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ArrayList</span><span class="p">()</span> <span class="p">;</span>
<span class="n">namedGraphURIs</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;file:named-1.ttl&quot;</span><span class="p">)</span> <span class="p">;</span>
<span class="n">namedGraphURIs</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;file:named-2.ttl&quot;</span><span class="p">)</span> <span class="p">;</span>

<span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="n">QueryFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span> <span class="p">;</span>

<span class="n">Dataset</span> <span class="n">dataset</span> <span class="o">=</span> <span class="n">DatasetFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">dftGraphURI</span><span class="p">,</span> <span class="n">namedGraphURIs</span><span class="p">)</span> <span class="p">;</span>
<span class="n">QueryExecution</span> <span class="n">qExec</span> <span class="o">=</span> <span class="n">QueryExecutionFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">dataset</span><span class="p">)</span> <span class="p">;</span>
<span class="n">try</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="n">finally</span> <span class="p">{</span> <span class="n">qExec</span><span class="p">.</span><span class="n">close</span><span class="p">()</span> <span class="p">;</span> <span class="p">}</span>
</pre></div>


<p>Already existing models can also be used: A <code>DataSource</code> is an
updatable dataset:</p>
<div class="codehilite"><pre><span class="n">DataSource</span> <span class="n">dataSource</span> <span class="o">=</span> <span class="n">DatsetFactory</span><span class="p">.</span><span class="n">create</span><span class="p">()</span> <span class="p">;</span>
<span class="n">dataSource</span><span class="p">.</span><span class="n">setDefaultModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> <span class="p">;</span>
<span class="n">dataSource</span><span class="p">.</span><span class="n">addNamedModel</span><span class="p">(</span><span class="s">&quot;http://example/named-1&quot;</span><span class="p">,</span> <span class="n">modelX</span><span class="p">)</span> <span class="p">;</span>
<span class="n">dataSource</span><span class="p">.</span><span class="n">addNamedModel</span><span class="p">(</span><span class="s">&quot;http://example/named-2&quot;</span><span class="p">,</span> <span class="n">modelY</span><span class="p">)</span> <span class="p">;</span>
<span class="n">QueryExecution</span> <span class="n">qExec</span> <span class="o">=</span> <span class="n">QueryExecutionFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">dataSource</span><span class="p">)</span> <span class="p">;</span>
</pre></div>


<p><a href="index.html">ARQ documentation index</a></p>
  </div>

  <div id="footer">
    <div class="copyright">
      <p>
        Copyright &copy; 2011&ndash;2013 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        <br />
        Apache Jena, Jena, the Apache Jena project logo,
        Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
      </p>
    </div>
  </div>

</body>
</html>
